(function() {
  const key = 'tiextremo.theme';
  const root = document.documentElement;

  function apply(theme) {
    root.setAttribute('data-theme', theme);
    localStorage.setItem(key, theme);
    const btn = document.getElementById('theme-toggle');
    if (btn) btn.textContent = theme === 'light' ? 'ðŸŒ™ Escuro' : 'â˜€ï¸ Claro';
  }

  // tema inicial
  const saved = localStorage.getItem(key);
  apply(saved === 'light' ? 'light' : 'dark');

  // aÃ§Ã£o botÃ£o
  window.toggleTheme = function() {
    const now = root.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
    apply(now);
  };
})();

/* === persistÃªncia de tema (claro/escuro) === */
(function(){
  try{
    const root = document.documentElement;
    const saved = localStorage.getItem('tixt_theme');
    const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    const start = saved || (prefersDark ? 'dark' : 'light');
    root.setAttribute('data-theme', start);

    // procura um botÃ£o de toggle, se existir
    const btn = document.querySelector('[data-theme-toggle], .theme-toggle, button:has(> .icon-theme)');
    function toggle(){
      const cur = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
      root.setAttribute('data-theme', cur);
      localStorage.setItem('tixt_theme', cur);
    }
    if (btn){ btn.addEventListener('click', toggle); }
  }catch(e){}
})();

/* === persistÃªncia de tema (claro/escuro) === */
(function(){
  try{
    const root = document.documentElement;
    const saved = localStorage.getItem('tixt_theme');
    const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    const start = saved || (prefersDark ? 'dark' : 'light');
    root.setAttribute('data-theme', start);

    // botÃ£o opcional com atributo data-theme-toggle
    const btn = document.querySelector('[data-theme-toggle], .theme-toggle, button:has(> .icon-theme)');
    function toggle(){
      const cur = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
      root.setAttribute('data-theme', cur);
      localStorage.setItem('tixt_theme', cur);
    }
    if (btn){ btn.addEventListener('click', toggle); }
  }catch(e){}
})();
